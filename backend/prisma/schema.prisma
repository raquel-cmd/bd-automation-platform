// This is your Prisma schema file
// Learn more: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Revenue data from uploaded CSV files
model RevenueData {
  id           Int      @id @default(autoincrement())
  platform     String   @db.VarChar(100)
  date         DateTime @db.Date
  brand        String   @db.VarChar(255)
  revenue      Decimal  @db.Decimal(12, 2)
  gmv          Decimal  @db.Decimal(12, 2)
  transactions Int
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@unique([platform, date, brand])
  @@index([platform])
  @@index([date])
  @@index([brand])
  @@index([platform, date])
  @@map("revenue_data")
}

// Upload history tracking
model UploadHistory {
  id               Int      @id @default(autoincrement())
  filename         String   @db.VarChar(255)
  platform         String   @db.VarChar(100)
  uploadDate       DateTime @default(now()) @map("upload_date")
  status           String   @db.VarChar(50)
  recordsProcessed Int      @default(0) @map("records_processed")
  uploadedBy       String   @default("admin") @db.VarChar(100) @map("uploaded_by")
  errorMessage     String?  @map("error_message") @db.Text

  @@map("upload_history")
}
